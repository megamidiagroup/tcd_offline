<!DOCTYPE html>
<html dir="ltr" lang="pt-BR">
<head>

    <title>Aguarde um momento...</title>
    
    <meta http-equiv="Content-Type" CONTENT="text/html; charset=UTF-8" />
    
    <meta name="description" content="Seja bem vindo ao treinamento a distÃ¢ncia TCD, www.treinandoequipes.com.br" />
    
</head>

<body>
	
	<table id="tabela" width="100%">
		<tr>
			<td align="center" style="font-size: 20px; font-weight: bold;">
				Iniciando o sistema TCD, aguarde um momento por favor ...
				<br /><br />
				<div id="valor">&nbsp;</div>
			</td>
		</tr>
	</table>
	
	<script type="text/javascript">
		var is_init = false;
		var number  = setInterval(contador, 1000);
		var count   = '';
		
		function contador()
		{
			
			document.getElementById('valor').innerHTML = '' + count + '';

			if (is_init)
			{
				window.location = 'http://localhost';
				clearInterval(number);
			}
			
			ajaxFunction();
			
			count += '|';
			
		}
		
		function getDocHeight() {
		    var D = document;
		    return Math.max(
		        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
		        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
		        Math.max(D.body.clientHeight, D.documentElement.clientHeight)
		    );
		}
		
		//Browser Support Code
		function ajaxFunction()
		{
			var ajaxRequest;  // The variable that makes Ajax possible!
			
			try{
				// Opera 8.0+, Firefox, Safari
				ajaxRequest = new XMLHttpRequest();
			} catch (e){
				// Internet Explorer Browsers
				try{
					ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
				} catch (e) {
					try{
						ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
					} catch (e){
						// Something went wrong
						alert("Your browser broke!");
						return false;
					}
				}
			}
			// Create a function that will receive data sent from the server
			ajaxRequest.onreadystatechange = function(){
				if(ajaxRequest.readyState == 4){
					if (ajaxRequest.responseText.search('Bad Gateway') <= -1)
					{
						is_init = true;
					}
				}
			}
			ajaxRequest.open("GET", "http://localhost", true);
			ajaxRequest.send(null);
		}

		document.getElementById("tabela").style.marginTop = ((getDocHeight() / 2) - 75) + "px"; // getDocHeight() );
		
		contador();
		
	</script>

</body>

</html>